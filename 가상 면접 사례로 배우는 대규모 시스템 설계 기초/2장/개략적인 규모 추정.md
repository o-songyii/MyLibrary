### 개략적인 규모 추정

---

보편적으로 통용되는 성능 수치상에서 사고 실험을 행하여 추정치를 계산하는 행위로서, 어떤 설계가 요구사항에 부합할 것인지 보기 위한 것

<aside>
💡 개략적인 규모 추청을 효과적으로 해 내려면 규모 확장성을 표현하는 데 필요한 기본기에 능숙해야 한다.

  ex. 2의 제곱수, 응답지연 값, 가용성에 관계된 수치

</aside>


### 2의 제곱수

---

최소 단위는 1바이트이고, 8비트로 구성된다.

제대로 된 계산 결과를 얻으려면 데이터 볼륨의 단위를 2의 제곱수로 표현하면 어떻게 되는지를 우선 알아야한다.

**데이터 볼륨 단위**

![2-3d2bcad4.jpg](attachment:951c9061-75a3-4b13-8920-dd3bd2f4dfb0:2-3d2bcad4.jpg)

### 모든 프로그래머가 알아야 하는 응답지연 값

---

구글의 제프 딘은 2010년에 통상적인 컴퓨터에서 구현된 연산들의 응답지연 값을 공개한 바 있다.

아직도 이 수치들은 컴퓨터 연산들의 처리 속도가 어느 정도인지 짐작할 수 있도록 해준다.

![1-3d2bcad4.jpg](attachment:34437d17-f8a2-4e28-a0b4-dcbd900ce848:1-3d2bcad4.jpg)

- 메모리는 빠르지만 디스크는 아직도 느리다
- 디스크 탐색(seek)은 가능한 한 피하라.
- 단순한 압축 알고리즘은 빠르다.
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축하라.
- 데이터 센터는 보통 여러 지역에 분산되어 있고, 센터들 간에 데이터를 주고받는 데는 시간이 걸린다.

### 가용성에 관계된 수치들

---

**고가용성** 

- 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 능력
- 100%는 시스템이 한 번도 중단된 적이 없었음을 의미하며, 대부분의 서비스는 99%에서 100% 사이의 값을 갖는다.

**SLA**

- 서비스 사업자와 고객 사이에 맺어진 합의를 의미
- 이 합의에는 서비스 사업자가 제공하는 서비스의 가용시간이 공식적으로 기술
- 아마존, 구글, 그리고 마이크로소프트 같은 사업자는 99%이상의 SLA를 제공

![3-3d2bcad4.jpg](attachment:1da6d544-fc75-4123-a7d8-3ca7dc08a7f6:3-3d2bcad4.jpg)

### 예제: 트위터 QPS와 저장소 요구량 추정

---

가정

- 월간 능동 사용자는 3억명이다.
- 50%의 사용자가 트위터를 매일 사용한다.
- 평균적으로 각 사용자는 매일 2건의 트윗을 올린다.
- 미디어를 보관하는 트윗은 10% 정도다.
- 데이터는 5년간 보관한다.

추정

QPS 추정치 (QPS: 데이터베이스나 웹 서버 API 등에서 특정 작업이나 **요청이 초당으로 얼마나 처리**되는지를 나타내는 지표)

- 일간 능동 사용자 (DAU) = 3억 * 50% = 1.5억
- QPS = 1.5억 * 2트윗/24시간/3600초 = 약 3500
- 최대 QPS(Peek QPS) = 2 * QPS = 약 7000

미디어 저장을 위한 저장소 요구량

- 평균 트윗 크기
    - tweed_id 에 64바이트
    - 텍스트에 140바이트
    - 미디어에 1MB
- 미디어 저장소 요구량: 1.5억 * 2 * 10% * 1MB = 30TB/일
- 5년간 미디어를 보관하기 위한 저장소 요구량: 30TB * 365 * 5 = 약 55PB

### 팁

---

- 근사치를 활용한 계산
    
    계산 결과의 정확함을 평가하는 것이 목적이 아니니, 적절한 근사치를 활용하여 시간을 절약하자.
    
- 가정을 적어두라.
- 단위를 붙여라.
- 많이 출제되는 개략적 규모 추정 문제는 QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정
